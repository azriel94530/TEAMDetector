This is a repository for the image reconstruction and analysis code I have written for the TEAM detector.  There are two versions of the code here: one that uses ROOT to plot images and histograms and one that uses a bunch of native scipy fucntionality.  I did the ROOT version first (because I started out knowing ROOT a little better), and it is mainly included as a piece of legacy software.  The native scipy code is WAY faster (by a factor of about four or five) and has a bunch of added functionality for finding local maxima and clusters of hits.  The scipy functionality is best supplied by installing anaconda (https://www.continuum.io/why-anaconda).

Running the code is pretty straightforward.  To process a single file, you run the script ReadTEAMData.py with two arguments, the path to the .dat file you want to analyze and the number of the trigger mode used on that file (this has to be a "2" or a "3" right now).  To batch process a bunch of files, you run BatchReadTeamData.py with the path to the list of files (wildcards are fine, but you have to enclose the path in quotes), and the trigger mode.  BatchReadTeamData.py just finds the files in the path you passed it, and then loops over those calling ReadTEAMData.py with the appropriate trigger mode for each. ReadTEAMData.py produces a directory with the same name as the .dat file (minus the ".dat" of course) containing the raw images, dark corrected images, and the Sum(N) spectra for N = 1, 9, and 25.  It also produces an hdf5 file with arrays containing the dark corrected images and the Sum(N) histogram values, as well as a few other salient details to facilitate further analysis.

That further analysis consists of two scripts right now.  MakeGlobalSumNSpectra.py does exactly what the name of the script says.  It reads in the Sum(N) histogram values from the aforementioned hdf5 file and adds them up to make a global spectrum over many files.  It then does some fits to those spectra to try to gain some insight there.  Right now, MakeGlobalSumNSpectra.py takes the path to the original .dat files read in by ReadTEAMData.py and asssumes that the subdirectories created by ReadTEAMData.py are where it left them.  The other further analysis script is 55FeAnalysis.py, which does more or less the same thing, but does a fit more appropriate for picking out the 55Fe peak from that kind of data.  There are a couple of other helper scripts: PythonTools.py, PythonTools_ROOT.py, and RootPlotLibs.py that provide functionality to the main analysis scripts.  There are also a couple of legacy versions of ReadTEAMData.py in the repo that I have kept around for historical reference.  You shouldn't need to ever look at them though.

Vic Gehman
